(function(){"use strict";function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,o=this,r=o.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,o=this.getListenersAsObject(t),r="object"==typeof n;for(i in o)o.hasOwnProperty(i)&&-1===e(o[i],n)&&o[i].push(r?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(i=e(r[o],n),-1!==i&&r[o].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)r.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(o=e[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,o,r,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(i=s[o].length;i--;)n=s[o][i],n.once===!0&&this.removeListener(t,n.listener),r=n.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(t){"use strict";function e(e){var n=t.event;return n.target=n.target||n.srcElement||e,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(t,e,n){t.addEventListener(e,n,!1)}:n.attachEvent&&(i=function(t,n,i){t[n+i]=i.handleEvent?function(){var n=e(t);i.handleEvent.call(i,n)}:function(){var n=e(t);i.call(t,n)},t.attachEvent("on"+n,t[n+i])});var o=function(){};n.removeEventListener?o=function(t,e,n){t.removeEventListener(e,n,!1)}:n.detachEvent&&(o=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var r={bind:i,unbind:o};"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){"use strict";function e(t){if(t){if("string"==typeof i[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=n.length;r>o;o++)if(e=n[o]+t,"string"==typeof i[e])return e}}var n="Webkit Moz ms Ms O".split(" "),i=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function n(t,e){var n=i(t,e)?r:o;n(t,e)}var i,o,r;"classList"in document.documentElement?(i=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},r=function(t,e){t.classList.remove(e)}):(i=function(t,n){return e(n).test(t.className)},o=function(t,e){i(t,e)||(t.className=t.className+" "+e)},r=function(t,n){t.className=t.className.replace(e(n)," ")});var s={hasClass:i,addClass:o,removeClass:r,toggleClass:n,has:i,add:o,remove:r,toggle:n};"function"==typeof define&&define.amd?define(s):"object"==typeof exports?module.exports=s:t.classie=s}(window),function(t){"use strict";function e(t){var e=parseFloat(t),n=-1===t.indexOf("%")&&!isNaN(e);return n&&e}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=s.length;n>e;e++){var i=s[e];t[i]=0}return t}function i(t){function i(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=r(t);if("none"===i.display)return n();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var h=o.isBorderBox=!(!c||!i[c]||"border-box"!==i[c]),p=0,d=s.length;d>p;p++){var f=s[p],l=i[f];l=a(t,l);var g=parseFloat(l);o[f]=isNaN(g)?0:g}var v=o.paddingLeft+o.paddingRight,y=o.paddingTop+o.paddingBottom,m=o.marginLeft+o.marginRight,x=o.marginTop+o.marginBottom,w=o.borderLeftWidth+o.borderRightWidth,b=o.borderTopWidth+o.borderBottomWidth,S=h&&u,E=e(i.width);E!==!1&&(o.width=E+(S?0:v+w));var P=e(i.height);return P!==!1&&(o.height=P+(S?0:y+b)),o.innerWidth=o.width-(v+w),o.innerHeight=o.height-(y+b),o.outerWidth=o.width+m,o.outerHeight=o.height+x,o}}function a(t,e){if(o||-1===e.indexOf("%"))return e;var n=t.style,i=n.left,r=t.runtimeStyle,s=r&&r.left;return s&&(r.left=t.currentStyle.left),n.left=e,e=n.pixelLeft,n.left=i,s&&(r.left=s),e}var u,c=t("boxSizing");return function(){if(c){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[c]="border-box";var n=document.body||document.documentElement;n.appendChild(t);var i=r(t);u=200===e(i.width),n.removeChild(t)}}(),i}var o=t.getComputedStyle,r=o?function(t){return o(t,null)}:function(t){return t.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("get-style-property")):t.getSize=i(t.getStyleProperty)}(window),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(){}function i(i,o,s,c,h){function d(t,n){this.element="string"==typeof t?r.querySelector(t):t,this.options=e({distance:1},this.options),e(this.options,n),this._create()}function f(){return!1}function l(t,e){t.x=void 0!==e.pageX?e.pageX:e.clientX,t.y=void 0!==e.pageY?e.pageY:e.clientY}function g(t,e,n){return n=n||"round",e?Math[n](t/e)*e:t}var v=c("transform"),y=!!c("perspective");e(d.prototype,o.prototype),d.prototype.options={},d.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=e({},this.position);var t=a(this.element);"relative"!==t.position&&"absolute"!==t.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},d.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element];for(var e=0,n=this.handles.length;n>e;e++){var i=this.handles[e];t.navigator.pointerEnabled?(s.bind(i,"pointerdown",this),i.style.touchAction="none"):t.navigator.msPointerEnabled?(s.bind(i,"MSPointerDown",this),i.style.msTouchAction="none"):(s.bind(i,"mousedown",this),s.bind(i,"touchstart",this),x(i))}};var m="attachEvent"in r.documentElement,x=m?function(t){"IMG"===t.nodeName&&(t.ondragstart=f);for(var e=t.querySelectorAll("img"),n=0,i=e.length;i>n;n++){var o=e[n];o.ondragstart=f}}:n;d.prototype._getPosition=function(){var t=a(this.element),e=parseInt(t.left,10),n=parseInt(t.top,10);this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)},d.prototype._addTransformPosition=function(t){if(v){var e=t[v];if(0===e.indexOf("matrix")){var n=e.split(","),i=0===e.indexOf("matrix3d")?12:4,o=parseInt(n[i],10),r=parseInt(n[i+1],10);this.position.x+=o,this.position.y+=r}}},d.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.prototype.getTouch=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i.identifier===this.pointerIdentifier)return i}},d.prototype.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this.beforeDragStart(t,t)},d.prototype.ontouchstart=function(t){this.isDragging||this.beforeDragStart(t,t.changedTouches[0])},d.prototype.onMSPointerDown=d.prototype.onpointerdown=function(t){this.isDragging||this.beforeDragStart(t,t)};var w={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};d.prototype.beforeDragStart=function(e,n){this.isEnabled&&(0===this.options.distance&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.pointerIdentifier=void 0!==n.pointerId?n.pointerId:n.identifier,this._getPosition(),this.measureContainment(),l(this.startPoint,n),this._bindEvents({events:w[e.type],node:e.preventDefault?t:r}))},d.prototype.dragStart=function(t,e){this.isDragging||(this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,i.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,t,e]),this.animate())},d.prototype._bindEvents=function(t){for(var e=0,n=t.events.length;n>e;e++){var i=t.events[e];s.bind(t.node,i,this)}this._boundEvents=t},d.prototype._unbindEvents=function(){var t=this._boundEvents;if(t&&t.events){for(var e=0,n=t.events.length;n>e;e++){var i=t.events[e];s.unbind(t.node,i,this)}delete this._boundEvents}},d.prototype.measureContainment=function(){var t=this.options.containment;if(t){this.size=h(this.element);var e=this.element.getBoundingClientRect(),n=u(t)?t:"string"==typeof t?r.querySelector(t):this.element.parentNode;this.containerSize=h(n);var i=n.getBoundingClientRect();this.relativeStartPosition={x:e.left-i.left,y:e.top-i.top}}},d.prototype.elementHasMoved=function(){var t=this.startPoint,e=this.dragPoint,n=e.x-t.x,i=e.y-t.y;return n*n+i*i>this.options.distance*this.options.distance},d.prototype.onmousemove=function(t){this.dragMove(t,t)},d.prototype.onMSPointerMove=d.prototype.onpointermove=function(t){t.pointerId===this.pointerIdentifier&&this.dragMove(t,t)},d.prototype.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragMove(t,e)},d.prototype.dragMove=function(t,e){if(l(this.dragPoint,e),this.isDragging){var n=this.dragPoint.x-this.startPoint.x,i=this.dragPoint.y-this.startPoint.y,o=this.options.grid,r=o&&o[0],s=o&&o[1];n=g(n,r),i=g(i,s),n=this.containDrag("x",n,r),i=this.containDrag("y",i,s),n="y"===this.options.axis?0:n,i="x"===this.options.axis?0:i,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+i,this.dragPoint.x=n,this.dragPoint.y=i,this.emitEvent("dragMove",[this,t,e])}else this.elementHasMoved()&&this.dragStart(t,e)},d.prototype.containDrag=function(t,e,n){if(!this.options.containment)return e;var i="x"===t?"width":"height",o=this.relativeStartPosition[t],r=g(-o,n,"ceil"),s=this.containerSize[i]-o-this.size[i];return s=g(s,n,"floor"),Math.min(s,Math.max(r,e))},d.prototype.onmouseup=function(t){this.dragEnd(t,t)},d.prototype.onMSPointerUp=d.prototype.onpointerup=function(t){t.pointerId===this.pointerIdentifier&&this.dragEnd(t,t)},d.prototype.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this.dragEnd(t,e)},d.prototype.dragEnd=function(t,e){return this._unbindEvents(),this.isDragging?(this.isDragging=!1,delete this.pointerIdentifier,v&&(this.element.style[v]="",this.setLeftTop()),i.remove(this.element,"is-dragging"),void this.emitEvent("dragEnd",[this,t,e])):!1},d.prototype.onMSPointerCancel=d.prototype.onpointercancel=function(t){t.pointerId===this.pointerIdentifier&&this.dragEnd(t,t)},d.prototype.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);this.dragEnd(t,e)},d.prototype.animate=function(){if(this.isDragging){this.positionDrag();var t=this;p(function(){t.animate()})}};var b=y?function(t,e){return"translate3d( "+t+"px, "+e+"px, 0)"}:function(t,e){return"translate( "+t+"px, "+e+"px)"};return d.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},d.prototype.positionDrag=v?function(){this.element.style[v]=b(this.dragPoint.x,this.dragPoint.y)}:d.prototype.setLeftTop,d.prototype.enable=function(){this.isEnabled=!0},d.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},d}for(var o,r=t.document,s=r.defaultView,a=s&&s.getComputedStyle?function(t){return s.getComputedStyle(t,null)}:function(t){return t.currentStyle},u="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},c=0,h="webkit moz ms o".split(" "),p=t.requestAnimationFrame,d=t.cancelAnimationFrame,f=0;f<h.length&&(!p||!d);f++)o=h[f],p=p||t[o+"RequestAnimationFrame"],d=d||t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"];p&&d||(p=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-c)),o=t.setTimeout(function(){e(n+i)},i);return c=n+i,o},d=function(e){t.clearTimeout(e)}),"function"==typeof define&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],i):t.Draggabilly=i(t.classie,t.EventEmitter,t.eventie,t.getStyleProperty,t.getSize)}(window);var Matrix=function(t){"use strict";function e(t,e,n,i){return(void 0===i||-1>i)&&(i=n+1),new a(t,n,i,e.col.start,e.col.end)}function n(t,e,n,i){return(void 0===i||-1>i)&&(i=n+1),new a(t,e.row.start,e.row.end,n,i)}function i(t,e){return t[e]}function o(t,e){var n=t.slice(e.row.start,e.row.end).map(function(t){return t.slice(e.col.start,e.col.end)});return 0===n.length&&(n=void 0),n}function r(t,e,n){return t[e]?t[e][n]:void 0}function s(t){return new a(t,0,t.size()[0],0,t.size()[1])}function a(t,e,n,i,o){this.row={start:e,end:n},this.col={start:i,end:o},this.matrix=t}a.prototype.rows=function(t,n){return e(this.matrix,this,t,n)},a.prototype.cols=function(t,e){return n(this.matrix,this,t,e)},a.prototype.val=function(){return o(this.matrix._,this)},a.prototype.size=function(){return[this.row.end-this.row.start,this.col.end-this.col.start]},a.prototype.each=function(t){var e,n,i,o=this.row.end,r=this.col.end;for(e=this.row.start;o>e;e++)for(n=this.col.start;r>n;n++)i=this.matrix.get(e,n),t(i,e,n)},a.prototype.map=function(t){var e=this;return this.each(function(n,i,o){e.matrix._[i]||(e.matrix._[i]=[]),e.matrix._[i][o]=t?t(n,i,o):null}),this.matrix},a.prototype.some=function(t){var e=!1;return this.each(function(n,i,o){t(n,i,o)&&(e=!0)}),e};var u=function(t){this._=t||[[]],this.selection=s(this)};return u.prototype.get=function(t,e){var n;return this.selection=s(this),n=void 0===e&&void 0!==t?i(this._,t):void 0===t?o(this._,this.selection):r(this._,t,e)},u.prototype.put=function(t,e,n){return this._[t][e]=n,this},u.prototype.size=function(){return[this._.length,this._[0].length]},u.prototype.rows=function(t,n){return e(this,this.selection,t,n)},u.prototype.cols=function(t,e){return n(this,this.selection,t,e)},u.prototype.each=function(e){t.each(this._,function(n,i){t.each(n,function(t,n){e(t,i,n)})})},u.prototype.map=function(e){var n=this;return t.each(this._,function(i,o){t.each(i,function(t,i){n.put(o,i,e(t,o,i))})}),this},u.prototype.some=function(e){return t.some(this._,function(n,i){return t.some(n,function(t,n){return e(t,i,n)})})},u}(_),Pocketry=function(t,e){"use strict";function n(i,o,r){function s(){this.container=t(i),r=r||{},c.slotSize=r.slotSize||100,c.filterClass=r.filterClass||"is-hidden";var e=c.determineColCount();e&&(c.layout=new Pocketry.Layout(e,o),c.initTiles(this.container),this.draggable(),window.addEventListener("resize",Pocketry.debounce(10,c.onResize)))}function a(t){return t[0].offsetHeight>0&&t[0].offsetWidth>0}function u(t){t.hidden=t.el.hasClass("is-hidden")}var c=this;this.initTiles=function(n){var i=this,o=e.map(n.children(),function(n,o){var r=t(n).attr("data-type"),s=e.extend(e.clone(i.getTileType(r)),{el:t(n),id:"#"+(o+1)});return s});return o.forEach(i.add),o.forEach(i.position),o},this.getTileType=function(t){return n.TILES[t]||n.TILES[0]},this.onResize=function(){a(c.container)&&(c.updateContainerDimensions(),c.relayout())},this.relayout=function(t){this.layout.stack.map(u),this.layout.rebuild(),this.layout.stack.forEach(function(t){t!==c._dragTile&&setTimeout(function(){c.position(t)},1)}),t&&t.parentNode.appendChild(t),this.publish("relayout")},this.updateContainerDimensions=function(){this.container.css("width",""),this.layout.colCount=this.determineColCount(),this.container.css({width:this.layout.colCount*this.slotSize+"px",height:this.layout.matrix.size()[0]*this.slotSize+"px"})},this.add=function(t){t.hidden=t.el.hasClass(c.filterClass),c.layout.add(t)},this.position=function(t){var e=t.position.x*c.slotSize,n=t.position.y*c.slotSize,i="translate("+e+"px, "+n+"px)";t.el.css({top:0,left:0,width:t.size[0]*c.slotSize+"px",height:t.size[1]*c.slotSize+"px","-webkit-transform":i,transform:i,"transition-duration":"0.5s","-webkit-transition-duration":"0.5s"}),c.updateContainerDimensions()},this.determineColCount=function(){var t=this.container[0],e=1;return t&&(e=Math.floor(t.clientWidth/this.slotSize)),e},s.call(c)}return n.TILES={pin:{size:[1,1],icon:"○"},app:{size:[2,2],icon:"□"},feed:{size:[3,2],icon:"▭"},placeholder:{size:[1,1]}},n}(jQuery,_);Pocketry.Layout=function(){"use strict";function t(t,e){this.colCount=t,this.rowSpan=e,this.init()}function e(t){return void 0!==t&&null!==t}function n(t){return function(n){return n.some(e)?!1:(n.map(function(){return t}),t.position={x:n.col.start,y:n.row.start},!0)}}function i(t,e){var n=t.y%e;return 0!==n&&(t.y-=n),t}function o(t,e,n){return t.x>=e?(t.x=0,t.y+=n):t.x+=1,t}function r(t,e){var n=e[e.length-1];return t.x>n.position.x&&t.y>=n.position.y}return t.prototype.init=function(){this.stack=[],this.matrix=this.initMatrix(),delete this.scanStartPosition},t.prototype.initMatrix=function(){return(new Matrix).rows(0,this.rowSpan).cols(0,this.colCount).map()},t.prototype.add=function(t){if(t.hidden)return this.stack.push(t),[];if(this._canFitTile(t)){var e=this.walk(n(t),t.size,this.scanStartPosition);if(e)return this._markRowAsScanned(),this.extend(),this.add(t);this._markScanPositionAtTile(t),this.stack.push(t)}return[]},t.prototype._canFitTile=function(t){return t.size[0]<=this.matrix.size()[1]},t.prototype._markRowAsScanned=function(){this.scanStartPosition={col:0,row:this.matrix.size()[0]}},t.prototype._markScanPositionAtTile=function(t){t.size[1]>=this.rowSpan&&(this.scanStartPosition={col:t.position.x+t.size[0],row:this.scanStartPosition?this.scanStartPosition.row:0})},t.prototype.move=function(t,e){null==e&&(e=-1);var n=this.stack;_.remove(n,t),-1!==e?n.splice(e,0,t):n.push(t),this.rebuild()},t.prototype.rebuild=function(){var t=this,e=this.stack;this.init(),e.forEach(function(e){t.add(e)})},t.prototype.getTile=function(t){return this.matrix.get(t.y,t.x)},t.prototype.moveTo=function(t,e){var n=this.getStackNeighbor(e),i=this.getTileInsertIndex(n,e);this.move(t,i)},t.prototype.getStackNeighbor=function(t){for(var e=this.matrix.get(t.y,t.x);!e&&(t=i(t,this.rowSpan),t=o(t,this.matrix.size()[1]-1,this.rowSpan),!r(t,this.stack));)e=this.getStackNeighbor(t);return e},t.prototype.getTileInsertIndex=function(t,e){if(!t)return-1;var n=this.stack.indexOf(t),i=t.position;return e.x>i.x+t.size[0]/2&&(n+=1),n},t.prototype.walk=function(t,e,n){e=e||[1,1],n=n||{col:0,row:0};for(var i=!1,o=n.row,r=this.matrix.size()[0];r>o&&!i;){var s=this._getRowToScan(o,n.col);i=this._scanRow(s,e,t),o+=this.rowSpan}return!i},t.prototype._getRowToScan=function(t,e){return this.matrix.rows(t,t+this.rowSpan).cols(e,this.matrix.size()[1])},t.prototype._scanRow=function(t,e,n){for(var i=0,o={row:{start:0,end:0},col:{start:0,end:0}},r=!1,s=this._getNumberOfScanSteps(t,e);s>i&&!r;)o=this._nextTopDownScanStep(i,e,t),r=n(this.matrix.rows(o.row.start,o.row.end).cols(o.col.start,o.col.end),i),i++;return r},t.prototype._getNumberOfScanSteps=function(t,e){var n=t.size(),i=n[0]-e[1]+1,o=n[1]-e[0]+1;return i*o},t.prototype._nextTopDownScanStep=function(t,e,n){var i,o,r;r=n.size()[0]-e[1]+1,o=n.col.start+Math.floor(t/r),i=n.row.start+t%r;var s={row:{start:i,end:i+e[1]},col:{start:o,end:o+e[0]}};return s},t.prototype.extend=function(){var t=this.matrix.size()[0];this.matrix.rows(t,t+this.rowSpan).map()},t}(),function(t){"use strict";Pocketry.prototype.draggable=function(){function e(t){var e=Pocketry.offset(i.container);return{x:t.pageX-e.left,y:t.pageY-e.top}}function n(t,e){return{x:Math.floor(t.x/e),y:Math.floor(t.y/e)}}var i=this;return this.init=function(){var e=this.container.children(":not(.draggable)");return t.each(e,function(e,n){var o=new Draggabilly(n,{containment:i.container[0]});o.on("dragStart",i.onPick),o.on("dragMove",Pocketry.debounce(50,function(){i._dragTile&&i.onMove.apply(i,arguments)})),o.on("dragEnd",i.onDrop),t(n).addClass("draggable")}),e},i.onPick=function(t){i._dragTile=i.determineTile(t.position,i.layout.matrix,i.slotSize)},this.onMove=function(t,e,n){console.log(t.position,n.x,n.y)},this.onDrop=function(t,n,o){var r=e(o),s=i.determineDropTarget(r),a=i._dragTile;delete i._dragTile,a===s.tile?i.position(a):(i.layout.moveTo(a,s.tilePosition),i.relayout()),i.publish("tile-dropped",{tile:a,distance:t.dragPoint})},this.determineTile=function(t){var e=n(t,this.slotSize);return this.layout.getTile(e)},this.determineDropTarget=function(t){return{position:t,tilePosition:n(t,this.slotSize),tile:this.determineTile(t)}},this.init.call(this),i}}(jQuery,_),Pocketry.prototype.publish=function(t,e){var n=this.subscriptions&&this.subscriptions[t];if(n){var i=this;n.forEach(function(t){t.call(i,e)})}},Pocketry.prototype.subscribe=function(t,e){var n=this.subscriptions;n||(n=this.subscriptions={}),n[t]||(n[t]=[]),n[t].push(e)},Pocketry.debounce=function(t,e){var n;return function(){var i=this,o=arguments;n&&(clearTimeout(n),n=null),n=setTimeout(function(){e.apply(i,o),n=null},t)}},Pocketry.offset=function(t){var e=t[0],n=document.documentElement||document.body,i=window.pageXOffset||n.scrollLeft,o=window.pageYOffset||n.scrollTop,r=e.getBoundingClientRect().left+i,s=e.getBoundingClientRect().top+o;return{left:r,top:s}};